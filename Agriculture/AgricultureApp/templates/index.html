{% extends 'base.html' %}
{% load static %}

{% block main_class %}{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
	<div class="container position-relative">
		<div class="row align-items-center">
			<div class="col-lg-7 animate-in">
				<span class="product-badge mb-3 d-inline-block">
					<i class="bi bi-shield-check me-1"></i>Blockchain Verified
				</span>
				<h1 class="hero-title mb-3">
					From Farm to Fork,<br>
					<span style="color: var(--accent-glow);">Fully Traceable.</span>
				</h1>
				<p class="hero-subtitle mb-4">
					Track every step of your food's journey with blockchain-powered transparency.
					Know your farmer, verify the origin, and ensure sustainable practices.
				</p>
				<div class="d-flex gap-3">
					<a href="#products" class="btn btn-accent btn-lg px-4">
						<i class="bi bi-grid-3x3-gap me-2"></i>Browse Products
					</a>
					{% if not current_user and user_type != 'Admin' %}
					<a href="{% url 'register' %}" class="btn btn-outline-light btn-lg px-4">
						<i class="bi bi-person-plus me-2"></i>Get Started
					</a>
					{% endif %}
				</div>
			</div>
			<div class="col-lg-5 text-center mt-4 mt-lg-0">
				<img src="{% static 'images/investor.jpg' %}" alt="Agriculture"
					style="border-radius: 20px; max-width: 100%; border: 2px solid var(--border-color);">
			</div>
		</div>
	</div>
</section>

<!-- Stats Section -->
<section class="py-5" style="background: var(--primary);">
	<div class="container">
		<div class="row g-4">
			<div class="col-md-4">
				<div class="stat-card">
					<div class="stat-number">{{ total_farmers }}</div>
					<div class="stat-label"><i class="bi bi-person-workspace me-1"></i>Registered Farmers</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="stat-card">
					<div class="stat-number">{{ total_products }}</div>
					<div class="stat-label"><i class="bi bi-box-seam me-1"></i>Available Products</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="stat-card">
					<div class="stat-number">{{ total_consumers }}</div>
					<div class="stat-label"><i class="bi bi-people me-1"></i>Happy Consumers</div>
				</div>
			</div>
		</div>
	</div>
</section>

<!-- Products Section -->
<section class="py-5" id="products">
	<div class="container">
		<h2 class="section-header"><i class="bi bi-grid-3x3-gap me-2 text-accent"></i>Fresh Products</h2>
		<p class="section-subheader">Browse products directly from verified farmers — no login required</p>

		{% if products %}
		<div class="row g-4">
			{% for product in products %}
			<div class="col-sm-6 col-lg-4 col-xl-3">
				<div class="product-card">
					{% if product.image %}
					<img src="/media/{{ product.image }}" class="card-img-top" alt="{{ product.name }}">
					{% else %}
					<div class="placeholder-img card-img-top">
						<i class="bi bi-flower1"></i>
					</div>
					{% endif %}

					<div class="card-body">
						<div class="d-flex justify-content-between align-items-start mb-2">
							<span class="product-badge">{{ product.category }}</span>
							{% if product.quantity > 0 %}
							<span class="product-badge"
								style="background: rgba(42,157,143,0.15); color: var(--success);">In Stock</span>
							{% endif %}
						</div>

						<h5 class="card-title">{{ product.name }}</h5>
						<p class="card-text small mb-2">
							<i class="bi bi-person-badge me-1"></i>{{ product.farmer.username }}
						</p>

						<div class="d-flex justify-content-between align-items-center mt-3">
							<span class="product-price">₹{{ product.price }}</span>
							<a href="{% url 'product_detail' product.pk %}" class="btn btn-sm btn-accent">
								<i class="bi bi-eye me-1"></i>View
							</a>
						</div>
					</div>
				</div>
			</div>
			{% endfor %}
		</div>
		{% else %}
		<div class="text-center py-5">
			<i class="bi bi-inbox display-1 text-muted-custom"></i>
			<h4 class="mt-3 text-muted-custom">No products available yet</h4>
			<p class="text-muted-custom">Farmers are adding products soon. Check back later!</p>
		</div>
		{% endif %}
	</div>
</section>
{% endblock %}